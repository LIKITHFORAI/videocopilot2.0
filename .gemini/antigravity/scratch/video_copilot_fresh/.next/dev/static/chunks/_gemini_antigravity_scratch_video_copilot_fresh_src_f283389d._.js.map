{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/herei/.gemini/antigravity/scratch/video_copilot_fresh/src/lib/msalConfig.ts"],"sourcesContent":["import { Configuration, PopupRequest } from \"@azure/msal-browser\";\r\n\r\nexport const msalConfig: Configuration = {\r\n    auth: {\r\n        clientId: process.env.NEXT_PUBLIC_AZURE_AD_CLIENT_ID!,\r\n        authority: `https://login.microsoftonline.com/${process.env.NEXT_PUBLIC_AZURE_AD_TENANT_ID}`,\r\n        // For redirect flow, redirect back to homepage\r\n        redirectUri: typeof window !== 'undefined'\r\n            ? (() => {\r\n                // Only apply basePath for production (not localhost)\r\n                const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\r\n                const basePath = isLocalhost ? '' : (process.env.NEXT_PUBLIC_BASEPATH || '');\r\n                return `${window.location.origin}${basePath}/`;\r\n            })()\r\n            : 'http://localhost:3000/',\r\n        postLogoutRedirectUri: typeof window !== 'undefined'\r\n            ? (() => {\r\n                const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\r\n                const basePath = isLocalhost ? '' : (process.env.NEXT_PUBLIC_BASEPATH || '');\r\n                return `${window.location.origin}${basePath}/`;\r\n            })()\r\n            : 'http://localhost:3000/',\r\n    },\r\n    cache: {\r\n        cacheLocation: \"sessionStorage\",\r\n    }\r\n};\r\n\r\nexport const loginRequest: PopupRequest = {\r\n    scopes: [\r\n        \"User.Read\",\r\n        \"Files.Read.All\",\r\n        \"Files.ReadWrite.All\",\r\n        \"Sites.Read.All\",\r\n        \"Sites.ReadWrite.All\"\r\n    ],\r\n    prompt: \"select_account\"\r\n};\r\n"],"names":[],"mappings":";;;;;;AAIkB;AAFX,MAAM,aAA4B;IACrC,MAAM;QACF,QAAQ;QACR,WAAW,CAAC,kCAAkC,4EAA8C;QAC5F,+CAA+C;QAC/C,aAAa,uCACP,CAAC;YACC,qDAAqD;YACrD,MAAM,cAAc,OAAO,QAAQ,CAAC,QAAQ,KAAK,eAAe,OAAO,QAAQ,CAAC,QAAQ,KAAK;YAC7F,MAAM,WAAW,cAAc,KAAM,wCAAoC;YACzE,OAAO,GAAG,OAAO,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;QAClD,CAAC,MACC;QACN,uBAAuB,uCACjB,CAAC;YACC,MAAM,cAAc,OAAO,QAAQ,CAAC,QAAQ,KAAK,eAAe,OAAO,QAAQ,CAAC,QAAQ,KAAK;YAC7F,MAAM,WAAW,cAAc,KAAM,wCAAoC;YACzE,OAAO,GAAG,OAAO,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;QAClD,CAAC,MACC;IACV;IACA,OAAO;QACH,eAAe;IACnB;AACJ;AAEO,MAAM,eAA6B;IACtC,QAAQ;QACJ;QACA;QACA;QACA;QACA;KACH;IACD,QAAQ;AACZ"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/herei/.gemini/antigravity/scratch/video_copilot_fresh/src/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { PublicClientApplication, EventType, EventMessage, AuthenticationResult } from \"@azure/msal-browser\";\r\nimport { MsalProvider } from \"@azure/msal-react\";\r\nimport { msalConfig } from \"@/lib/msalConfig\";\r\nimport { ReactNode, useMemo, useEffect, useState } from \"react\";\r\n\r\nexport default function AuthContext({ children }: { children: ReactNode }) {\r\n    const [msalInstance, setMsalInstance] = useState<PublicClientApplication | null>(null);\r\n\r\n    // Create MSAL instance lazily on client side only\r\n    useEffect(() => {\r\n        if (typeof window === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        const initializeMsal = async () => {\r\n            const instance = new PublicClientApplication(msalConfig);\r\n\r\n            // Initialize MSAL\r\n            await instance.initialize();\r\n\r\n            // Handle redirect promise (important for redirect flow)\r\n            await instance.handleRedirectPromise();\r\n\r\n            // Set active account if accounts exist on initialization\r\n            const accounts = instance.getAllAccounts();\r\n            if (!instance.getActiveAccount() && accounts.length > 0) {\r\n                instance.setActiveAccount(accounts[0]);\r\n            }\r\n\r\n            // Listen for successful login events\r\n            instance.addEventCallback((event: EventMessage) => {\r\n                if (event.eventType === EventType.LOGIN_SUCCESS && event.payload) {\r\n                    const payload = event.payload as AuthenticationResult;\r\n                    if (payload.account) {\r\n                        instance.setActiveAccount(payload.account);\r\n                    }\r\n                }\r\n            });\r\n\r\n            setMsalInstance(instance);\r\n        };\r\n\r\n        initializeMsal();\r\n    }, []);\r\n\r\n    // Don't render MsalProvider during SSR or before initialization\r\n    if (!msalInstance) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <MsalProvider instance={msalInstance}>\r\n            {children}\r\n        </MsalProvider>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAOe,SAAS,YAAY,EAAE,QAAQ,EAA2B;;IACrE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sOAAQ,EAAiC;IAEjF,kDAAkD;IAClD,IAAA,uOAAS;iCAAC;YACN;;YAIA,MAAM;wDAAiB;oBACnB,MAAM,WAAW,IAAI,gRAAuB,CAAC,sMAAU;oBAEvD,kBAAkB;oBAClB,MAAM,SAAS,UAAU;oBAEzB,wDAAwD;oBACxD,MAAM,SAAS,qBAAqB;oBAEpC,yDAAyD;oBACzD,MAAM,WAAW,SAAS,cAAc;oBACxC,IAAI,CAAC,SAAS,gBAAgB,MAAM,SAAS,MAAM,GAAG,GAAG;wBACrD,SAAS,gBAAgB,CAAC,QAAQ,CAAC,EAAE;oBACzC;oBAEA,qCAAqC;oBACrC,SAAS,gBAAgB;gEAAC,CAAC;4BACvB,IAAI,MAAM,SAAS,KAAK,sPAAS,CAAC,aAAa,IAAI,MAAM,OAAO,EAAE;gCAC9D,MAAM,UAAU,MAAM,OAAO;gCAC7B,IAAI,QAAQ,OAAO,EAAE;oCACjB,SAAS,gBAAgB,CAAC,QAAQ,OAAO;gCAC7C;4BACJ;wBACJ;;oBAEA,gBAAgB;gBACpB;;YAEA;QACJ;gCAAG,EAAE;IAEL,gEAAgE;IAChE,IAAI,CAAC,cAAc;QACf,OAAO;IACX;IAEA,qBACI,0PAAC,gPAAY;QAAC,UAAU;kBACnB;;;;;;AAGb;GAlDwB;KAAA"}}]
}