// SIMPLIFIED BATCH UPLOAD FIX
// Add this right after line 384 in handleFileChange

        // Create batch file entries if multiple files
        if (files.length > 1) {
            const newBatchFiles = files.map((file, idx) => ({
                id: `${Date.now()}-${idx}-${file.name}`,
                name: file.name,
                status: 'uploading' as const,
                progress: 0,
            }));
            setBatchFiles(newBatchFiles);
        }

        // Process files sequentially
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const fileId = files.length > 1 ? `${Date.now()}-${i}-${file.name}` : null;
            
            console.log(`Processing file ${i + 1}/${files.length}: ${file.name}`);
            
            // Update message to show batch progress
            if (files.length > 1) {
                setMessage(`Batch: ${i + 1}/${files.length} - ${file.name}`);
            }
            
            await processFile(file, fileId);  // <-- PASS fileId HERE
